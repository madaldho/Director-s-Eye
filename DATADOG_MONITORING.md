# ðŸ“Š Datadog Monitoring Guide for Directors Eye

This guide explains how to monitor the "Director's Eye" application using Datadog, fulfilling the hackathon observability requirements.

## 1. Prerequisites
Ensure the application is running:
- **Backend**: `node server/index.js` (Port 4567)
- **Frontend**: `npm run dev` (Port 3000)
- **Traffic Generator**: `node scripts/traffic-generator.js` (Simulates users)

## 2. What to Monitor in Datadog

### A. APM (Application Performance Monitoring)
*Go to: APM > Services > directors-eye-backend*

- **Traces**: You will see traces for `POST /api/analyze`.
- **Latency**: Check the duration of AI analysis vs Demo Mode.
- **Errors**: The traffic generator explicitly triggers 20% errors. You should see red error spikes.

### B. Metrics (Custom Metrics)
*Go to: Metrics > Explorer*

Search for these custom metrics sending from `server/index.js`:
- `app.cinematography.score` (Gauge): The score of the analyzed image.
- `app.cinematography.lighting` (Gauge): Lighting quality score.
- `app.cinematography.mood` (Set): Types of moods detected.

**Suggested Dashboard Widget**:
- Create a **Timeseries** graph for `app.cinematography.score` to see the quality of photos being "analyzed" over time.

### C. RUM (Real User Monitoring)
*Go to: UX Monitoring > RUM Applications > Director's Eye*

- **Sessions**: Monitor active user sessions.
- **Actions**: Look for custom actions:
  - `image_upload_started`
  - `image_analyzed` (contains metadata like `score`)
- **Errors**: Frontend errors (if any) will appear here.

### D. Logs
*Go to: Logs > Search*

- Filter by `service:directors-eye-backend`.
- You will see structured logs with `trace_id` injection (connecting Logs to Traces).
- Look for "Fallback to Demo Mode" logs to see the resilience mechanism in action.

## 3. Verification Checklist

1. [ ] **Traces**: Are new traces appearing every ~2 seconds (from traffic generator)?
2. [ ] **Metrics**: Can you graph `app.cinematography.score`?
3. [ ] **RUM**: Do you see a session when you open `localhost:3000`?
4. [ ] **Logs**: Are logs correlated with traces?

---
*Generated by Antigravity for Datadog AI Accelerator*
